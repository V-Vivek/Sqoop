# Sqoop practice queries

- Dataset:  
https://github.com/kasipavankumar/sqoop-docker/pkgs/container/sqoop-docker

## List databases
```bash
sqoop list-databases \
--connect jdbc:mysql://localhost:3306 \
--username bda \
--password 123456
```

## List tables
```bash
sqoop list-tables \
--connect jdbc:mysql://localhost:3306/employees \
--username bda \
--password 123456
```

## Run SQL query
```bash
sqoop eval \
--connect jdbc:mysql://localhost:3306/employees \
--username bda \
--password 123456 \
--query "SELECT * FROM employees LIMIT 20"
```

## Import complete table data 
```bash
sqoop import \
--connect jdbc:mysql://localhost:3306/employees \
--table employees \
--username bda \
--password 123456
```

## Import partial table data 
```bash
sqoop import \
--connect jdbc:mysql://localhost:3306/employees \
--table employees \
--username bda \
--password 123456 \
--where "emp_no < 10021"
```

## Import data in a specified directory
- Note that this will not create a directory named by the table name & all the part files will be directly created in the path specified
- Either you need to specify the table name under the ```--target-dir``` argument or you need to use ```warehouse-dir``` argument instead
```bash
sqoop import \
--connect jdbc:mysql://localhost:3306/employees \
--table employees \
--username bda \
--password 123456 \
--where "emp_no < 10021" \
--target-dir user/data/
```

## Import data in a specified directory with table name retained
```bash
sqoop import \
--connect jdbc:mysql://localhost:3306/employees \
--table employees \
--username bda \
--password 123456 \
--where "emp_no < 10021" \
--warehouse-dir user/data/
```

## Custom no. of splits
```bash
sqoop import \
--connect jdbc:mysql://localhost:3306/employees \
--table employees \
--username bda \
--password 123456 \
--m 10
```

## Specifying custom column to be used for splitting
```bash
sqoop import \
--connect jdbc:mysql://localhost:3306/employees \
--table employees \
--username bda \
--password 123456 \
--split-by "emp_no"
```

## To delete the exisitng table data before importing the new data
```bash
sqoop import \
--connect jdbc:mysql://localhost:3306/employees \
--table employees \
--username bda \
--password 123456 \
--delete-target-dir
```

## Importing data using ```fields-terminated-by```
- By default the fields are terminated by ',' in the imported data
- We can specify custom separator by using thi flag
```bash
sqoop import \
--connect jdbc:mysql://localhost:3306/employees \
--table employees \
--username bda \
--password 123456 \
--fields-terminated-by '|'
```
